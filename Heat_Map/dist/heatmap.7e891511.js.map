{"version":3,"sources":["../js-extra/heatmap.js"],"names":["name","context","factory","module","exports","define","amd","HeatmapConfig","defaultRadius","defaultRenderer","defaultGradient","defaultMaxOpacity","defaultMinOpacity","defaultBlur","defaultXField","defaultYField","defaultValueField","plugins","Store","StoreClosure","config","_coordinator","_data","_radi","_min","_max","_xField","_yField","_valueField","_cfgRadius","prototype","_organiseData","dataPoint","forceRender","x","y","radi","store","max","min","value","radius","storedVal","setDataMax","setDataMin","_unOrganizeData","unorganizedData","data","push","_onExtremaChange","emit","addData","arguments","length","dataArr","dataLen","call","organisedEntry","setData","dataPoints","pointsLen","i","_getInternalData","removeData","setCoordinator","coordinator","getData","Canvas2dRenderer","Canvas2dRendererClosure","_getColorPalette","gradientConfig","gradient","paletteCanvas","document","createElement","paletteCtx","getContext","width","height","createLinearGradient","key","addColorStop","fillStyle","fillRect","getImageData","_getPointTemplate","blurFactor","tplCanvas","tplCtx","beginPath","arc","Math","PI","fill","createRadialGradient","_prepareData","renderData","xValues","Object","keys","xValuesLen","xValue","yValues","yValuesLen","yValue","container","shadowCanvas","canvas","renderBoundaries","_renderBoundaries","computed","getComputedStyle","className","_width","replace","_height","shadowCtx","ctx","style","cssText","position","appendChild","_palette","_templates","_setStyles","renderPartial","_drawAlpha","_colorize","renderAll","_clear","_updateGradient","updateConfig","setDimensions","clearRect","_blur","blur","backgroundColor","_opacity","opacity","_maxOpacity","maxOpacity","_minOpacity","minOpacity","_useGradientOpacity","useGradientOpacity","point","rectX","rectY","tpl","templateAlpha","globalAlpha","drawImage","maxWidth","maxHeight","img","imgData","len","palette","alpha","offset","finalAlpha","putImageData","getValueAt","abs","getDataURL","toDataURL","Renderer","RendererClosure","rendererFn","Util","merge","merged","argsLen","obj","Heatmap","HeatmapClosure","Coordinator","CoordinatorClosure","cStore","on","evtName","callback","scope","_connect","renderer","_renderer","_store","_config","onExtremaChange","pluginToLoad","Error","plugin","apply","configure","repaint","heatmapFactory","create","register","pluginKey"],"mappings":"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","file":"heatmap.7e891511.js","sourceRoot":"..\\src","sourcesContent":["/*\r\n * heatmap.js v2.0.5 | JavaScript Heatmap Library\r\n *\r\n * Copyright 2008-2016 Patrick Wied <heatmapjs@patrick-wied.at> - All rights reserved.\r\n * Dual licensed under MIT and Beerware license \r\n *\r\n * :: 2016-09-05 01:16\r\n */\r\n;(function (name, context, factory) {\r\n\r\n    // Supports UMD. AMD, CommonJS/Node.js and browser context\r\n    if (typeof module !== \"undefined\" && module.exports) {\r\n      module.exports = factory();\r\n    } else if (typeof define === \"function\" && define.amd) {\r\n      define(factory);\r\n    } else {\r\n      context[name] = factory();\r\n    }\r\n  \r\n  })(\"h337\", this, function () {\r\n  \r\n  // Heatmap Config stores default values and will be merged with instance config\r\n  var HeatmapConfig = {\r\n    defaultRadius: 40,\r\n    defaultRenderer: 'canvas2d',\r\n    defaultGradient: { 0.25: \"rgb(0,0,255)\", 0.55: \"rgb(0,255,0)\", 0.85: \"yellow\", 1.0: \"rgb(255,0,0)\"},\r\n    defaultMaxOpacity: 1,\r\n    defaultMinOpacity: 0,\r\n    defaultBlur: .85,\r\n    defaultXField: 'x',\r\n    defaultYField: 'y',\r\n    defaultValueField: 'value', \r\n    plugins: {}\r\n  };\r\n  var Store = (function StoreClosure() {\r\n  \r\n    var Store = function Store(config) {\r\n      this._coordinator = {};\r\n      this._data = [];\r\n      this._radi = [];\r\n      this._min = 10;\r\n      this._max = 1;\r\n      this._xField = config['xField'] || config.defaultXField;\r\n      this._yField = config['yField'] || config.defaultYField;\r\n      this._valueField = config['valueField'] || config.defaultValueField;\r\n  \r\n      if (config[\"radius\"]) {\r\n        this._cfgRadius = config[\"radius\"];\r\n      }\r\n    };\r\n  \r\n    var defaultRadius = HeatmapConfig.defaultRadius;\r\n  \r\n    Store.prototype = {\r\n      // when forceRender = false -> called from setData, omits renderall event\r\n      _organiseData: function(dataPoint, forceRender) {\r\n          var x = dataPoint[this._xField];\r\n          var y = dataPoint[this._yField];\r\n          var radi = this._radi;\r\n          var store = this._data;\r\n          var max = this._max;\r\n          var min = this._min;\r\n          var value = dataPoint[this._valueField] || 1;\r\n          var radius = dataPoint.radius || this._cfgRadius || defaultRadius;\r\n  \r\n          if (!store[x]) {\r\n            store[x] = [];\r\n            radi[x] = [];\r\n          }\r\n  \r\n          if (!store[x][y]) {\r\n            store[x][y] = value;\r\n            radi[x][y] = radius;\r\n          } else {\r\n            store[x][y] += value;\r\n          }\r\n          var storedVal = store[x][y];\r\n  \r\n          if (storedVal > max) {\r\n            if (!forceRender) {\r\n              this._max = storedVal;\r\n            } else {\r\n              this.setDataMax(storedVal);\r\n            }\r\n            return false;\r\n          } else if (storedVal < min) {\r\n            if (!forceRender) {\r\n              this._min = storedVal;\r\n            } else {\r\n              this.setDataMin(storedVal);\r\n            }\r\n            return false;\r\n          } else {\r\n            return { \r\n              x: x, \r\n              y: y,\r\n              value: value, \r\n              radius: radius,\r\n              min: min,\r\n              max: max \r\n            };\r\n          }\r\n      },\r\n      _unOrganizeData: function() {\r\n        var unorganizedData = [];\r\n        var data = this._data;\r\n        var radi = this._radi;\r\n  \r\n        for (var x in data) {\r\n          for (var y in data[x]) {\r\n  \r\n            unorganizedData.push({\r\n              x: x,\r\n              y: y,\r\n              radius: radi[x][y],\r\n              value: data[x][y]\r\n            });\r\n  \r\n          }\r\n        }\r\n        return {\r\n          min: this._min,\r\n          max: this._max,\r\n          data: unorganizedData\r\n        };\r\n      },\r\n      _onExtremaChange: function() {\r\n        this._coordinator.emit('extremachange', {\r\n          min: this._min,\r\n          max: this._max\r\n        });\r\n      },\r\n      addData: function() {\r\n        if (arguments[0].length > 0) {\r\n          var dataArr = arguments[0];\r\n          var dataLen = dataArr.length;\r\n          while (dataLen--) {\r\n            this.addData.call(this, dataArr[dataLen]);\r\n          }\r\n        } else {\r\n          // add to store  \r\n          var organisedEntry = this._organiseData(arguments[0], true);\r\n          if (organisedEntry) {\r\n            // if it's the first datapoint initialize the extremas with it\r\n            if (this._data.length === 0) {\r\n              this._min = this._max = organisedEntry.value;\r\n            }\r\n            this._coordinator.emit('renderpartial', {\r\n              min: this._min,\r\n              max: this._max,\r\n              data: [organisedEntry]\r\n            });\r\n          }\r\n        }\r\n        return this;\r\n      },\r\n      setData: function(data) {\r\n        var dataPoints = data.data;\r\n        var pointsLen = dataPoints.length;\r\n  \r\n  \r\n        // reset data arrays\r\n        this._data = [];\r\n        this._radi = [];\r\n  \r\n        for(var i = 0; i < pointsLen; i++) {\r\n          this._organiseData(dataPoints[i], false);\r\n        }\r\n        this._max = data.max;\r\n        this._min = data.min || 0;\r\n        \r\n        this._onExtremaChange();\r\n        this._coordinator.emit('renderall', this._getInternalData());\r\n        return this;\r\n      },\r\n      removeData: function() {\r\n        // TODO: implement\r\n      },\r\n      setDataMax: function(max) {\r\n        this._max = max;\r\n        this._onExtremaChange();\r\n        this._coordinator.emit('renderall', this._getInternalData());\r\n        return this;\r\n      },\r\n      setDataMin: function(min) {\r\n        this._min = min;\r\n        this._onExtremaChange();\r\n        this._coordinator.emit('renderall', this._getInternalData());\r\n        return this;\r\n      },\r\n      setCoordinator: function(coordinator) {\r\n        this._coordinator = coordinator;\r\n      },\r\n      _getInternalData: function() {\r\n        return { \r\n          max: this._max,\r\n          min: this._min, \r\n          data: this._data,\r\n          radi: this._radi \r\n        };\r\n      },\r\n      getData: function() {\r\n        return this._unOrganizeData();\r\n      }/*,\r\n        TODO: rethink.\r\n      getValueAt: function(point) {\r\n        var value;\r\n        var radius = 100;\r\n        var x = point.x;\r\n        var y = point.y;\r\n        var data = this._data;\r\n        if (data[x] && data[x][y]) {\r\n          return data[x][y];\r\n        } else {\r\n          var values = [];\r\n          // radial search for datapoints based on default radius\r\n          for(var distance = 1; distance < radius; distance++) {\r\n            var neighbors = distance * 2 +1;\r\n            var startX = x - distance;\r\n            var startY = y - distance;\r\n            for(var i = 0; i < neighbors; i++) {\r\n              for (var o = 0; o < neighbors; o++) {\r\n                if ((i == 0 || i == neighbors-1) || (o == 0 || o == neighbors-1)) {\r\n                  if (data[startY+i] && data[startY+i][startX+o]) {\r\n                    values.push(data[startY+i][startX+o]);\r\n                  }\r\n                } else {\r\n                  continue;\r\n                } \r\n              }\r\n            }\r\n          }\r\n          if (values.length > 0) {\r\n            return Math.max.apply(Math, values);\r\n          }\r\n        }\r\n        return false;\r\n      }*/\r\n    };\r\n  \r\n  \r\n    return Store;\r\n  })();\r\n  \r\n  var Canvas2dRenderer = (function Canvas2dRendererClosure() {\r\n  \r\n    var _getColorPalette = function(config) {\r\n      var gradientConfig = config.gradient || config.defaultGradient;\r\n      var paletteCanvas = document.createElement('canvas');\r\n      var paletteCtx = paletteCanvas.getContext('2d');\r\n  \r\n      paletteCanvas.width = 256;\r\n      paletteCanvas.height = 1;\r\n  \r\n      var gradient = paletteCtx.createLinearGradient(0, 0, 256, 1);\r\n      for (var key in gradientConfig) {\r\n        gradient.addColorStop(key, gradientConfig[key]);\r\n      }\r\n  \r\n      paletteCtx.fillStyle = gradient;\r\n      paletteCtx.fillRect(0, 0, 256, 1);\r\n  \r\n      return paletteCtx.getImageData(0, 0, 256, 1).data;\r\n    };\r\n  \r\n    var _getPointTemplate = function(radius, blurFactor) {\r\n      var tplCanvas = document.createElement('canvas');\r\n      var tplCtx = tplCanvas.getContext('2d');\r\n      var x = radius;\r\n      var y = radius;\r\n      tplCanvas.width = tplCanvas.height = radius*2;\r\n  \r\n      if (blurFactor == 1) {\r\n        tplCtx.beginPath();\r\n        tplCtx.arc(x, y, radius, 0, 2 * Math.PI, false);\r\n        tplCtx.fillStyle = 'rgba(0,0,0,1)';\r\n        tplCtx.fill();\r\n      } else {\r\n        var gradient = tplCtx.createRadialGradient(x, y, radius*blurFactor, x, y, radius);\r\n        gradient.addColorStop(0, 'rgba(0,0,0,1)');\r\n        gradient.addColorStop(1, 'rgba(0,0,0,0)');\r\n        tplCtx.fillStyle = gradient;\r\n        tplCtx.fillRect(0, 0, 2*radius, 2*radius);\r\n      }\r\n  \r\n  \r\n  \r\n      return tplCanvas;\r\n    };\r\n  \r\n    var _prepareData = function(data) {\r\n      var renderData = [];\r\n      var min = data.min;\r\n      var max = data.max;\r\n      var radi = data.radi;\r\n      var data = data.data;\r\n  \r\n      var xValues = Object.keys(data);\r\n      var xValuesLen = xValues.length;\r\n  \r\n      while(xValuesLen--) {\r\n        var xValue = xValues[xValuesLen];\r\n        var yValues = Object.keys(data[xValue]);\r\n        var yValuesLen = yValues.length;\r\n        while(yValuesLen--) {\r\n          var yValue = yValues[yValuesLen];\r\n          var value = data[xValue][yValue];\r\n          var radius = radi[xValue][yValue];\r\n          renderData.push({\r\n            x: xValue,\r\n            y: yValue,\r\n            value: value,\r\n            radius: radius\r\n          });\r\n        }\r\n      }\r\n  \r\n      return {\r\n        min: min,\r\n        max: max,\r\n        data: renderData\r\n      };\r\n    };\r\n  \r\n  \r\n    function Canvas2dRenderer(config) {\r\n      var container = config.container;\r\n      var shadowCanvas = this.shadowCanvas = document.createElement('canvas');\r\n      var canvas = this.canvas = config.canvas || document.createElement('canvas');\r\n      var renderBoundaries = this._renderBoundaries = [10000, 10000, 0, 0];\r\n  \r\n      var computed = getComputedStyle(config.container) || {};\r\n  \r\n      canvas.className = 'heatmap-canvas';\r\n  \r\n      this._width = canvas.width = shadowCanvas.width = config.width || +(computed.width.replace(/px/,''));\r\n      this._height = canvas.height = shadowCanvas.height = config.height || +(computed.height.replace(/px/,''));\r\n  \r\n      this.shadowCtx = shadowCanvas.getContext('2d');\r\n      this.ctx = canvas.getContext('2d');\r\n  \r\n      // @TODO:\r\n      // conditional wrapper\r\n  \r\n      canvas.style.cssText = shadowCanvas.style.cssText = 'position:absolute;left:0;top:0;';\r\n  \r\n      container.style.position = 'relative';\r\n      container.appendChild(canvas);\r\n  \r\n      this._palette = _getColorPalette(config);\r\n      this._templates = {};\r\n  \r\n      this._setStyles(config);\r\n    };\r\n  \r\n    Canvas2dRenderer.prototype = {\r\n      renderPartial: function(data) {\r\n        if (data.data.length > 0) {\r\n          this._drawAlpha(data);\r\n          this._colorize();\r\n        }\r\n      },\r\n      renderAll: function(data) {\r\n        // reset render boundaries\r\n        this._clear();\r\n        if (data.data.length > 0) {\r\n          this._drawAlpha(_prepareData(data));\r\n          this._colorize();\r\n        }\r\n      },\r\n      _updateGradient: function(config) {\r\n        this._palette = _getColorPalette(config);\r\n      },\r\n      updateConfig: function(config) {\r\n        if (config['gradient']) {\r\n          this._updateGradient(config);\r\n        }\r\n        this._setStyles(config);\r\n      },\r\n      setDimensions: function(width, height) {\r\n        this._width = width;\r\n        this._height = height;\r\n        this.canvas.width = this.shadowCanvas.width = width;\r\n        this.canvas.height = this.shadowCanvas.height = height;\r\n      },\r\n      _clear: function() {\r\n        this.shadowCtx.clearRect(0, 0, this._width, this._height);\r\n        this.ctx.clearRect(0, 0, this._width, this._height);\r\n      },\r\n      _setStyles: function(config) {\r\n        this._blur = (config.blur == 0)?0:(config.blur || config.defaultBlur);\r\n  \r\n        if (config.backgroundColor) {\r\n          this.canvas.style.backgroundColor = config.backgroundColor;\r\n        }\r\n  \r\n        this._width = this.canvas.width = this.shadowCanvas.width = config.width || this._width;\r\n        this._height = this.canvas.height = this.shadowCanvas.height = config.height || this._height;\r\n  \r\n  \r\n        this._opacity = (config.opacity || 0) * 255;\r\n        this._maxOpacity = (config.maxOpacity || config.defaultMaxOpacity) * 255;\r\n        this._minOpacity = (config.minOpacity || config.defaultMinOpacity) * 255;\r\n        this._useGradientOpacity = !!config.useGradientOpacity;\r\n      },\r\n      _drawAlpha: function(data) {\r\n        var min = this._min = data.min;\r\n        var max = this._max = data.max;\r\n        var data = data.data || [];\r\n        var dataLen = data.length;\r\n        // on a point basis?\r\n        var blur = 1 - this._blur;\r\n  \r\n        while(dataLen--) {\r\n  \r\n          var point = data[dataLen];\r\n  \r\n          var x = point.x;\r\n          var y = point.y;\r\n          var radius = point.radius;\r\n          // if value is bigger than max\r\n          // use max as value\r\n          var value = Math.min(point.value, max);\r\n          var rectX = x - radius;\r\n          var rectY = y - radius;\r\n          var shadowCtx = this.shadowCtx;\r\n  \r\n  \r\n  \r\n  \r\n          var tpl;\r\n          if (!this._templates[radius]) {\r\n            this._templates[radius] = tpl = _getPointTemplate(radius, blur);\r\n          } else {\r\n            tpl = this._templates[radius];\r\n          }\r\n          // value from minimum / value range\r\n          // => [0, 1]\r\n          var templateAlpha = (value-min)/(max-min);\r\n          // this fixes #176: small values are not visible because globalAlpha < .01 cannot be read from imageData\r\n          shadowCtx.globalAlpha = templateAlpha < .01 ? .01 : templateAlpha;\r\n  \r\n          shadowCtx.drawImage(tpl, rectX, rectY);\r\n  \r\n          // update renderBoundaries\r\n          if (rectX < this._renderBoundaries[0]) {\r\n              this._renderBoundaries[0] = rectX;\r\n            }\r\n            if (rectY < this._renderBoundaries[1]) {\r\n              this._renderBoundaries[1] = rectY;\r\n            }\r\n            if (rectX + 2*radius > this._renderBoundaries[2]) {\r\n              this._renderBoundaries[2] = rectX + 2*radius;\r\n            }\r\n            if (rectY + 2*radius > this._renderBoundaries[3]) {\r\n              this._renderBoundaries[3] = rectY + 2*radius;\r\n            }\r\n  \r\n        }\r\n      },\r\n      _colorize: function() {\r\n        var x = this._renderBoundaries[0];\r\n        var y = this._renderBoundaries[1];\r\n        var width = this._renderBoundaries[2] - x;\r\n        var height = this._renderBoundaries[3] - y;\r\n        var maxWidth = this._width;\r\n        var maxHeight = this._height;\r\n        var opacity = this._opacity;\r\n        var maxOpacity = this._maxOpacity;\r\n        var minOpacity = this._minOpacity;\r\n        var useGradientOpacity = this._useGradientOpacity;\r\n  \r\n        if (x < 0) {\r\n          x = 0;\r\n        }\r\n        if (y < 0) {\r\n          y = 0;\r\n        }\r\n        if (x + width > maxWidth) {\r\n          width = maxWidth - x;\r\n        }\r\n        if (y + height > maxHeight) {\r\n          height = maxHeight - y;\r\n        }\r\n  \r\n        var img = this.shadowCtx.getImageData(x, y, width, height);\r\n        var imgData = img.data;\r\n        var len = imgData.length;\r\n        var palette = this._palette;\r\n  \r\n  \r\n        for (var i = 3; i < len; i+= 4) {\r\n          var alpha = imgData[i];\r\n          var offset = alpha * 4;\r\n  \r\n  \r\n          if (!offset) {\r\n            continue;\r\n          }\r\n  \r\n          var finalAlpha;\r\n          if (opacity > 0) {\r\n            finalAlpha = opacity;\r\n          } else {\r\n            if (alpha < maxOpacity) {\r\n              if (alpha < minOpacity) {\r\n                finalAlpha = minOpacity;\r\n              } else {\r\n                finalAlpha = alpha;\r\n              }\r\n            } else {\r\n              finalAlpha = maxOpacity;\r\n            }\r\n          }\r\n  \r\n          imgData[i-3] = palette[offset];\r\n          imgData[i-2] = palette[offset + 1];\r\n          imgData[i-1] = palette[offset + 2];\r\n          imgData[i] = useGradientOpacity ? palette[offset + 3] : finalAlpha;\r\n  \r\n        }\r\n  \r\n        img.data = imgData;\r\n        this.ctx.putImageData(img, x, y);\r\n  \r\n        this._renderBoundaries = [1000, 1000, 0, 0];\r\n  \r\n      },\r\n      getValueAt: function(point) {\r\n        var value;\r\n        var shadowCtx = this.shadowCtx;\r\n        var img = shadowCtx.getImageData(point.x, point.y, 1, 1);\r\n        var data = img.data[3];\r\n        var max = this._max;\r\n        var min = this._min;\r\n  \r\n        value = (Math.abs(max-min) * (data/255)) >> 0;\r\n  \r\n        return value;\r\n      },\r\n      getDataURL: function() {\r\n        return this.canvas.toDataURL();\r\n      }\r\n    };\r\n  \r\n  \r\n    return Canvas2dRenderer;\r\n  })();\r\n  \r\n  \r\n  var Renderer = (function RendererClosure() {\r\n  \r\n    var rendererFn = false;\r\n  \r\n    if (HeatmapConfig['defaultRenderer'] === 'canvas2d') {\r\n      rendererFn = Canvas2dRenderer;\r\n    }\r\n  \r\n    return rendererFn;\r\n  })();\r\n  \r\n  \r\n  var Util = {\r\n    merge: function() {\r\n      var merged = {};\r\n      var argsLen = arguments.length;\r\n      for (var i = 0; i < argsLen; i++) {\r\n        var obj = arguments[i]\r\n        for (var key in obj) {\r\n          merged[key] = obj[key];\r\n        }\r\n      }\r\n      return merged;\r\n    }\r\n  };\r\n  // Heatmap Constructor\r\n  var Heatmap = (function HeatmapClosure() {\r\n  \r\n    var Coordinator = (function CoordinatorClosure() {\r\n  \r\n      function Coordinator() {\r\n        this.cStore = {};\r\n      };\r\n  \r\n      Coordinator.prototype = {\r\n        on: function(evtName, callback, scope) {\r\n          var cStore = this.cStore;\r\n  \r\n          if (!cStore[evtName]) {\r\n            cStore[evtName] = [];\r\n          }\r\n          cStore[evtName].push((function(data) {\r\n              return callback.call(scope, data);\r\n          }));\r\n        },\r\n        emit: function(evtName, data) {\r\n          var cStore = this.cStore;\r\n          if (cStore[evtName]) {\r\n            var len = cStore[evtName].length;\r\n            for (var i=0; i<len; i++) {\r\n              var callback = cStore[evtName][i];\r\n              callback(data);\r\n            }\r\n          }\r\n        }\r\n      };\r\n  \r\n      return Coordinator;\r\n    })();\r\n  \r\n  \r\n    var _connect = function(scope) {\r\n      var renderer = scope._renderer;\r\n      var coordinator = scope._coordinator;\r\n      var store = scope._store;\r\n  \r\n      coordinator.on('renderpartial', renderer.renderPartial, renderer);\r\n      coordinator.on('renderall', renderer.renderAll, renderer);\r\n      coordinator.on('extremachange', function(data) {\r\n        scope._config.onExtremaChange &&\r\n        scope._config.onExtremaChange({\r\n          min: data.min,\r\n          max: data.max,\r\n          gradient: scope._config['gradient'] || scope._config['defaultGradient']\r\n        });\r\n      });\r\n      store.setCoordinator(coordinator);\r\n    };\r\n  \r\n  \r\n    function Heatmap() {\r\n      var config = this._config = Util.merge(HeatmapConfig, arguments[0] || {});\r\n      this._coordinator = new Coordinator();\r\n      if (config['plugin']) {\r\n        var pluginToLoad = config['plugin'];\r\n        if (!HeatmapConfig.plugins[pluginToLoad]) {\r\n          throw new Error('Plugin \\''+ pluginToLoad + '\\' not found. Maybe it was not registered.');\r\n        } else {\r\n          var plugin = HeatmapConfig.plugins[pluginToLoad];\r\n          // set plugin renderer and store\r\n          this._renderer = new plugin.renderer(config);\r\n          this._store = new plugin.store(config);\r\n        }\r\n      } else {\r\n        this._renderer = new Renderer(config);\r\n        this._store = new Store(config);\r\n      }\r\n      _connect(this);\r\n    };\r\n  \r\n    // @TODO:\r\n    // add API documentation\r\n    Heatmap.prototype = {\r\n      addData: function() {\r\n        this._store.addData.apply(this._store, arguments);\r\n        return this;\r\n      },\r\n      removeData: function() {\r\n        this._store.removeData && this._store.removeData.apply(this._store, arguments);\r\n        return this;\r\n      },\r\n      setData: function() {\r\n        this._store.setData.apply(this._store, arguments);\r\n        return this;\r\n      },\r\n      setDataMax: function() {\r\n        this._store.setDataMax.apply(this._store, arguments);\r\n        return this;\r\n      },\r\n      setDataMin: function() {\r\n        this._store.setDataMin.apply(this._store, arguments);\r\n        return this;\r\n      },\r\n      configure: function(config) {\r\n        this._config = Util.merge(this._config, config);\r\n        this._renderer.updateConfig(this._config);\r\n        this._coordinator.emit('renderall', this._store._getInternalData());\r\n        return this;\r\n      },\r\n      repaint: function() {\r\n        this._coordinator.emit('renderall', this._store._getInternalData());\r\n        return this;\r\n      },\r\n      getData: function() {\r\n        return this._store.getData();\r\n      },\r\n      getDataURL: function() {\r\n        return this._renderer.getDataURL();\r\n      },\r\n      getValueAt: function(point) {\r\n  \r\n        if (this._store.getValueAt) {\r\n          return this._store.getValueAt(point);\r\n        } else  if (this._renderer.getValueAt) {\r\n          return this._renderer.getValueAt(point);\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    };\r\n  \r\n    return Heatmap;\r\n  \r\n  })();\r\n  \r\n  \r\n  // core\r\n  var heatmapFactory = {\r\n    create: function(config) {\r\n      return new Heatmap(config);\r\n    },\r\n    register: function(pluginKey, plugin) {\r\n      HeatmapConfig.plugins[pluginKey] = plugin;\r\n    }\r\n  };\r\n  \r\n  return heatmapFactory;\r\n  \r\n  \r\n  });"]}